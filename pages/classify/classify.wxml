<view class="bg" >
  <image class="bg-img" mode="scaleToFill" src="../../asset/images/background.png"></image>
</view>

<view class="main">
  <view class="photo-getter">
    <image src="../../asset/images/camera_border.png" mode="aspectFit" class="camera-border"></image>
    <image class="photo" mode="aspectFit" wx:if="{{imagePath}}" src="{{imagePath}}"></image>
    <camera class="camera"  wx:else></camera>
  </view>
  <view class="tip">注意：格式只能为png,jpg,jpeg</view>
  <button class="primary" bindtap="takePhoto">{{imagePath ? '开启相机' : '拍照识别'}}</button>
  <button class="primary" bindtap="chooseImage">选图识别</button>
  <button class="warning" bindtap="classify" wx:if="{{imagePath}}">重新识别该图片</button>

  <view class='loading'>
    <mp-loading show="{{classifyProcess==='loading'}}" 
    type="circle" tips="识别中">
    </mp-loading>    
  </view>
  <mp-halfScreenDialog class='successed' show="{{classifyProcess==='successed'}}" bindclose="">
    <view class="result" slot="title">
      识别结果：{{ classifyResult }}
    </view>
    <view class="result" slot="desc">
      {{ resultToDesc[classifyResult] }}
    </view>
    <view class="rank" slot="footer">
      <view wx:if="{{isRanked}}">谢谢您的评价！</view>
      <view wx:else>
        <slider min="0" max="100" value="{{rankValue}}" show-value="true" bindchange="changeSlider"></slider> 
        <button type="primary" bindtap="rank">给这次识别打分</button>
      </view>
      <button type="primary" bindtap="getLocation">当地垃圾分类规范</button>
    </view>   
  </mp-halfScreenDialog>
  <mp-toptips class="failed" type="error" msg="{{failedMsg}}"
   show="{{classifyProcess==='failed'}}" >
  </mp-toptips>

</view>

<custom-tabbar class="tabbar" pageName="classify"></custom-tabbar>

<button wx:if="{{debug}}" bindtap="test">调试</button>
