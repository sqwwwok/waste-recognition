<view class="main">
  <view>
    <image mode="aspectFit" wx:if="{{imagePath}}" src="{{imagePath}}"></image>
    <camera class="camera"  wx:else ></camera>
    <view class="tip">注意：格式只能为png,jpg,jpeg</view>
  </view>
  <button type="primary" bindtap="takePhoto">{{imagePath ? '开启相机' : '拍照识别'}}</button>
  <button type="primary" bindtap="chooseImage">选图识别</button>
  <button type="warn" bindtap="classify" wx:if="{{imagePath}}">重新识别该图片</button>

  <view class='loading'>
    <mp-loading show="{{classifyProcess==='loading'}}" 
    type="circle" tips="识别中">
    </mp-loading>    
  </view>
  <mp-halfScreenDialog class='successed' show="{{classifyProcess==='successed'}}" bindclose="">
    <view class="result" slot="title">
      识别结果：{{ classifyResult }}
    </view>
    <view class="result" slot="desc">
      {{ resultToDesc[classifyResult] }}
    </view>
    <view class="rank" slot="footer">
      <view wx:if="{{isRanked}}">谢谢您的评价！</view>
      <view wx:else>
        <slider min="0" max="100" value="{{rankValue}}" show-value="true" bindchange="changeSlider"></slider> 
        <button type="primary" bindtap="rank">给这次识别打分</button>
      </view>
      <button type="primary" bindtap="getLocation">当地垃圾分类规范</button>
    </view>   
  </mp-halfScreenDialog>
  <mp-toptips class="failed" type="error" msg="{{failedMsg}}"
   show="{{classifyProcess==='failed'}}" >
  </mp-toptips>

</view>

<button wx:if="{{debug}}" bindtap="test">调试</button>
